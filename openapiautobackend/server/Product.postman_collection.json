{
	"info": {
		"_postman_id": "b668f5ba-c8ca-4b4c-8a2e-588389c13da1",
		"name": "Product Collections",
		"description": "# üöÄ Get started here\n\nThis template guides you through CRUD operations (GET, POST, PUT, DELETE), variables, and tests.\n\n## üîñ **How to use this template**\n\n#### **Step 1: Send requests**\n\nRESTful APIs allow you to perform CRUD operations using the POST, GET, PUT, and DELETE HTTP methods.\n\nThis collection contains each of these [request](https://learning.postman.com/docs/sending-requests/requests/) types. Open each request and click \"Send\" to see what happens.\n\n#### **Step 2: View responses**\n\nObserve the response tab for status code (200 OK), response time, and size.\n\n#### **Step 3: Send new Body data**\n\nUpdate or add new data in \"Body\" in the POST request. Typically, Body data is also used in PUT request.\n\n```\n{\n    \"name\": \"Add your name in the body\"\n}\n\n ```\n\n#### **Step 4: Update the variable**\n\nVariables enable you to store and reuse values in Postman. We have created a [variable](https://learning.postman.com/docs/sending-requests/variables/) called `base_url` with the sample request [https://postman-api-learner.glitch.me](https://postman-api-learner.glitch.me). Replace it with your API endpoint to customize this collection.\n\n#### **Step 5: Add tests in the \"Scripts\" tab**\n\nAdding tests to your requests can help you confirm that your API is working as expected. You can write test scripts in JavaScript and view the output in the \"Test Results\" tab.\n\n<img src=\"https://content.pstmn.io/fa30ea0a-373d-4545-a668-e7b283cca343/aW1hZ2UucG5n\" alt=\"\" height=\"1530\" width=\"2162\">\n\n## üí™ Pro tips\n\n- Use folders to group related requests and organize the collection.\n    \n- Add more [scripts](https://learning.postman.com/docs/writing-scripts/intro-to-scripts/) to verify if the API works as expected and execute workflows.\n    \n\n## üí°Related templates\n\n[API testing basics](https://go.postman.co/redirect/workspace?type=personal&collectionTemplateId=e9a37a28-055b-49cd-8c7e-97494a21eb54&sourceTemplateId=ddb19591-3097-41cf-82af-c84273e56719)  \n[API documentation](https://go.postman.co/redirect/workspace?type=personal&collectionTemplateId=e9c28f47-1253-44af-a2f3-20dce4da1f18&sourceTemplateId=ddb19591-3097-41cf-82af-c84273e56719)  \n[Authorization methods](https://go.postman.co/redirect/workspace?type=personal&collectionTemplateId=31a9a6ed-4cdf-4ced-984c-d12c9aec1c27&sourceTemplateId=ddb19591-3097-41cf-82af-c84273e56719)",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "49469972",
		"_collection_link": "https://binhdaumoi0309-1172908.postman.co/workspace/B%C3%ACnh-Nguy%E1%BB%85n-%C4%90%C3%ACnh's-Workspace~fde15b6c-3d39-4a44-8671-1a07cf9c38fc/collection/49469972-b668f5ba-c8ca-4b4c-8a2e-588389c13da1?action=share&source=collection_link&creator=49469972"
	},
	"item": [
		{
			"name": "Login",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// Unit Test 1: Ki·ªÉm tra m√£ tr·∫°ng th√°i 200 (Success)\r",
							"pm.test(\"Status 200: Login Successful\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"// Unit Test 2: Ki·ªÉm tra vai tr√≤ v√† token\r",
							"pm.test(\"Response contains valid access_token and role is admin\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"    pm.expect(jsonData.status).to.eql(\"success\");\r",
							"    pm.expect(jsonData.data.access_token).to.be.a('string');\r",
							"    pm.expect(jsonData.data.role).to.eql(\"admin\"); // X√°c nh·∫≠n quy·ªÅn Admin\r",
							"});\r",
							"\r",
							"// Integration Setup: L∆ØU access_token v√† refresh_token v√†o Environment\r",
							"// Bi·∫øn n√†y s·∫Ω ƒë∆∞·ª£c d√πng trong Authorization c·ªßa 7 Request ti·∫øp theo\r",
							"var jsonData = pm.response.json();\r",
							"pm.environment.set(\"access_token\", jsonData.data.access_token);\r",
							"pm.environment.set(\"refresh_token\", jsonData.data.refresh_token);\r",
							"\r",
							"console.log(\"Access Token saved to environment for subsequent requests.\");"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"username\": \"{{admin_username}}\",\r\n    \"password\": \"{{admin_password}}\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_url}}/api/sessions",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"sessions"
					]
				}
			},
			"response": []
		},
		{
			"name": "Post Product",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// Unit Test 1: Check Status 201 (CREATED)",
							"pm.test(\"Status 201: Product created successfully\", function () {",
							"    pm.response.to.have.status(201);",
							"});",
							"",
							"// --- LOGIC B·∫¢O V·ªÜ CH·ªà CH·∫†Y KHI TH√ÄNH C√îNG (STATUS 201) ---",
							"// Bi·∫øn c·ªù (flag) ƒë·ªÉ ki·ªÉm tra xem c√≥ n√™n ti·∫øp t·ª•c test d·ªØ li·ªáu kh√¥ng",
							"const isSuccess = pm.response.code === 201;",
							"",
							"if (isSuccess) {",
							"    // Ch·ªâ parse JSON khi th√†nh c√¥ng",
							"    const responseData = pm.response.json().data;",
							"",
							"    // Unit Test 2: Data Validation - Check if the SKU is correct",
							"    pm.test(\"SKU in response matches the request SKU\", function () {",
							"        const expectedSku = pm.environment.get(\"sku_to_create\");",
							"        pm.expect(responseData.sku).to.eql(expectedSku);",
							"    });",
							"",
							"    // Unit Test 3: Check Authorization/Role (Admin check) - Check status or price data",
							"    pm.test(\"Product price is correct\", function () {",
							"        pm.expect(responseData.price).to.eql(2500.00); ",
							"    });",
							"",
							"    // Integration Setup: L∆ØU ID s·∫£n ph·∫©m v·ª´a t·∫°o v√†o Environment",
							"    const newProductId = responseData.id;",
							"    pm.environment.set(\"product_id\", newProductId);",
							"    console.log(\"New Product ID saved: \" + newProductId);",
							"    ",
							"} else {",
							"    // N·∫øu th·∫•t b·∫°i (400), ch√∫ng ta ƒë·∫£m b·∫£o kh√¥ng c√≥ l·ªói TypeError v√† bi·∫øn b·ªã reset",
							"    pm.environment.set(\"product_id_new\", null);",
							"    console.log(\"Product creation failed (Status \" + pm.response.code + \"). ID reset.\");",
							"}"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"sku\": \"{{sku_to_create}}\",\n    \"name\": \"Laptop XPS 15\",\n    \"description\": \"High-performance laptop for development and testing.\",\n    \"category\": \"Electronics\",\n    \"brand\": \"Dell\",\n    \"price\": 2500.00,\n    \"quantity\": 25\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_url}}/api/products",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"products"
					]
				},
				"description": "This is a POST request, submitting data to an API via the request body. This request submits JSON data, and the data is reflected in the response.\n\nA successful POST request typically returns a `200 OK` or `201 Created` response code."
			},
			"response": []
		},
		{
			"name": "Negative post",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// Negative Test 1: Check Status 400 (Bad Request - Validation Error)\r",
							"pm.test(\"Status 400: Validation error received for missing fields\", function () {\r",
							"    pm.response.to.have.status(400); \r",
							"});\r",
							"\r",
							"// Negative Test 2: Check Error Response Structure\r",
							"pm.test(\"Response status is 'error'\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"    pm.expect(jsonData).to.have.property('status');\r",
							"    pm.expect(jsonData.status).to.eql(\"error\");\r",
							"});\r",
							"\r",
							"// Negative Test 3: Check Specific Error Message Content\r",
							"pm.test(\"Error message indicates the first missing field (sku)\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"    pm.expect(jsonData).to.have.property('message'); \r",
							"    pm.expect(jsonData.message).to.be.a('string');\r",
							"    pm.expect(jsonData.message).to.eql(\"sku is required\"); \r",
							"});\r",
							"\r",
							"// Security/Side Effect Check: Ensure no product was created\r",
							"pm.test(\"Product ID is NOT created in the environment\", function () {\r",
							"    // N·∫øu request n√†y th√†nh c√¥ng, n√≥ s·∫Ω kh√¥ng ghi ƒë√® l√™n bi·∫øn product_id\r",
							"    // ƒêi·ªÅu n√†y ƒë·∫£m b·∫£o Request 4 (GET detail) s·∫Ω kh√¥ng b·ªã ·∫£nh h∆∞·ªüng b·ªüi l·ªói n√†y.\r",
							"    pm.expect(pm.response.json().data).to.be.undefined; \r",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"description\": \"This product is missing SKU, name, and price.\",\r\n    \"brand\": \"Negative Test Brand\",\r\n    \"quantity\": 1\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_url}}/api/products",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"products"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get a Product",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// Unit Test 1: Check Status 200 (SUCCESS)",
							"pm.test(\"Status 200: Product Detail Retrieved\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"// Unit Test 2: Data Validation - Check for key fields",
							"pm.test(\"Response is an object with required fields (id, sku, name)\", function () {",
							"    var responseData = pm.response.json().data;",
							"    pm.expect(responseData).to.be.an('object');",
							"    pm.expect(responseData.id).to.not.be.null;",
							"    pm.expect(responseData.sku).to.not.be.null;",
							"});",
							"",
							"// Integration Check: Confirm the retrieved ID matches the created ID",
							"pm.test(\"The retrieved product ID matches the created ID\", function () {",
							"    var retrievedId = pm.response.json().data.id;",
							"    var expectedId = pm.environment.get(\"product_id\");",
							"    pm.expect(retrievedId).to.eql(expectedId);",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_url}}/api/products/{{product_id}}",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"products",
						"{{product_id}}"
					]
				},
				"description": "This is a GET request and it is used to \"get\" data from an endpoint. There is no request body for a GET request, but you can use query parameters to help specify the resource you want data on (e.g., in this request, we have `id=1`).\n\nA successful GET response will have a `200 OK` status, and should include some kind of response body - for example, HTML web content or JSON data."
			},
			"response": []
		},
		{
			"name": "Update Product",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// Unit Test 1: Check Status 200 (SUCCESS)",
							"pm.test(\"Status 200: Product Updated Successfully\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"// Data Validation 2: Check if the updated name is reflected in the response",
							"pm.test(\"Product name is updated correctly\", function () {",
							"    var responseData = pm.response.json().data;",
							"    pm.expect(responseData.name).to.eql(\"Smartphone Model X - UPDATED\");",
							"});",
							"",
							"// Data Validation 3: Check if the updated price is reflected (c·∫©n th·∫≠n ki·ªÉu d·ªØ li·ªáu float)",
							"pm.test(\"Product price is updated correctly\", function () {",
							"    var responseData = pm.response.json().data;",
							"    // Chuy·ªÉn v·ªÅ chu·ªói ƒë·ªÉ so s√°nh ho·∫∑c d√πng tolerance cho s·ªë float",
							"    pm.expect(responseData.price).to.eql(1399.99); ",
							"});",
							"",
							"// Data Validation 4: Check if the updated status is reflected",
							"pm.test(\"Product status is updated to inactive\", function () {",
							"    var responseData = pm.response.json().data;",
							"    pm.expect(responseData.status).to.eql(\"inactive\");",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "PUT",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"name\": \"Smartphone Model X - UPDATED\",\n    \"price\": 1399.99,\n    \"quantity\": 75,\n    \"status\": \"inactive\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_url}}/api/products/{{product_id}}",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"products",
						"{{product_id}}"
					]
				},
				"description": "This is a PUT request and it is used to overwrite an existing piece of data. For instance, after you create an entity with a POST request, you may want to modify that later. You can do that using a PUT request. You typically identify the entity being updated by including an identifier in the URL (eg. `id=1`).\n\nA successful PUT request typically returns a `200 OK`, `201 Created`, or `204 No Content` response code."
			},
			"response": []
		},
		{
			"name": "Statistics",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"// Unit Test 1: Check Status 200 (SUCCESS) - Confirm Admin access is granted\r",
							"pm.test(\"Status 200: Statistics Retrieved (Admin Access Granted)\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"// Data Validation 2: Check for existence of core statistics objects\r",
							"pm.test(\"Response data contains 'inventory' and 'categories' objects\", function () {\r",
							"    var data = pm.response.json().data;\r",
							"    pm.expect(data).to.have.property('inventory');\r",
							"    pm.expect(data).to.have.property('categories');\r",
							"});\r",
							"\r",
							"// Data Validation 3: Check data types of key metrics\r",
							"pm.test(\"Total products and total quantity are numbers\", function () {\r",
							"    var inventory = pm.response.json().data.inventory;\r",
							"    pm.expect(inventory.total_products).to.be.a('number');\r",
							"    pm.expect(inventory.total_quantity).to.be.a('number');\r",
							"    pm.expect(inventory.total_value).to.be.a('number');\r",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"username\": \"{{admin_username}}\",\r\n    \"password\": \"{{admin_password}}\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_url}}/api/statistics",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"statistics"
					]
				}
			},
			"response": []
		},
		{
			"name": "Delete Product",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// Unit Test 1: Check Status 200 (SUCCESS)",
							"pm.test(\"Status 200: Product Deleted Successfully\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"// Cleanup: X√≥a bi·∫øn product_id kh·ªèi environment sau khi ho√†n th√†nh chu tr√¨nh test",
							"pm.environment.unset(\"product_id\"); ",
							"console.log(\"product_id cleaned up from environment.\");"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "DELETE",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_url}}/api/products/{{product_id}}",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"products",
						"{{product_id}}"
					]
				},
				"description": "This is a DELETE request, and it is used to delete data that was previously created via a POST request. You typically identify the entity being updated by including an identifier in the URL (eg. `id=1`).\n\nA successful DELETE request typically returns a `200 OK`, `202 Accepted`, or `204 No Content` response code."
			},
			"response": []
		},
		{
			"name": "Products",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// Unit Test 1: Check Status 200 (SUCCESS)\r",
							"pm.test(\"Status 200: Products list retrieved successfully\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"// Data Validation 2: Check if the response is an array of products\r",
							"pm.test(\"Response contains an array named 'data'\", function () {\r",
							"    var responseData = pm.response.json();\r",
							"    pm.expect(responseData.data).to.be.an('array');\r",
							"});\r",
							"\r",
							"// Data Validation 3: Check Pagination (Testing the 'limit' query parameter)\r",
							"pm.test(\"Pagination check: The list length is equal to the requested limit (2)\", function () {\r",
							"    var productsArray = pm.response.json().data;\r",
							"    pm.expect(productsArray.length).to.eql(2);\r",
							"});\r",
							"\r",
							"// Data Validation 4: Check Meta Data (Ki·ªÉm tra th√¥ng tin ph√¢n trang)\r",
							"pm.test(\"Meta data contains total_count and total_pages\", function () {\r",
							"    var meta = pm.response.json().meta;\r",
							"    pm.expect(meta.total_count).to.be.a('number');\r",
							"    pm.expect(meta).to.have.property('total_pages');\r",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/api/products?limit=2",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"products"
					],
					"query": [
						{
							"key": "limit",
							"value": "2"
						}
					]
				}
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "id",
			"value": "1"
		},
		{
			"key": "base_url",
			"value": "https://template.postman-echo.com"
		}
	]
}